<!DOCTYPE html>
<html>
  <head>
    <meta charset="UTF-8" />
    <link rel="stylesheet" href="index.css" />
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css" integrity="sha512-iecdLmaskl7CVkqkXNQ/ZH/XLlvWZOJyj7Yy7tcenmpD1ypASozpmT/E0iPtmFIB46ZmdtAc9eNBvH0H/ZpiBw==" crossorigin="anonymous" referrerpolicy="no-referrer" />
    <script src="main.js"></script>
  </head>
  <body style="overflow: hidden;">
    <div class="content navbar-content" id="content">
      <div class="titlebar-top flex-between">
        <div class="titlebar-top-left"></div>

        <div class="titlebar-top-center">
          <div id="tabs">
            <div class="tab">
              <img src="https://google.com/favicon.ico" alt="Google" class="tab-favicon" />
              <span class="tab-title">Google</span>
              <span class="tab-close flex-center"><i class="fas fa-times hoverable"></i></span>
            </div>

            <div class="tab">
              <img src="https://bing.com/favicon.ico" alt="Google" class="tab-favicon" />
              <span class="tab-title">Bing</span>
              <span class="tab-close flex-center"><i class="fas fa-times hoverable"></i></span>
            </div>
          </div>
        </div>

        <div class="titlebar-top-right">
          <div id="minimize" class="tb-tr-item flex-center">
            <i class="fas fa-window-minimize flex-center"></i>
          </div>

          <div id="maximize" class="tb-tr-item flex-center">
            <i class="fas fa-window-maximize flex-center"></i>
          </div>

          <div id="close" class="tb-tr-item flex-center">
            <i class="fas fa-times flex-center"></i>
          </div>
        </div>
      </div>

      <div class="titlebar-bottom flex-between">
        <div class="titlebar-bottom-left"></div>

        <div class="titlebar-bottom-center">
          <input type="text" id="url-input" value="https://google.com">
        </div>

        <div class="titlebar-bottom-right"></div>
      </div>
    </div>
  </body>
</html>

<script>
  // Navbar dragging, if click parent navbar, enable drag attrib
  document.onmousedown = function (e) {
    // Instead of getting the target, get the visible element under the cursor
    var target = document.elementFromPoint(e.clientX, e.clientY)
    
    var validDraggableElements = [
      "#tabs",
      ".titlebar-top",
      ".titlebar-top-left",
      ".titlebar-bottom"
    ];

    var didMod = false;

    for (var i = 0; i < validDraggableElements.length; i++) {
      if (target.matches(validDraggableElements[i])) {
        // Enable -webkit-app-region: drag on the parent element
        document.getElementById("content").style["-webkit-app-region"] = "drag";
        didMod = true;
        break;
      }
    }

    if (!didMod) {
      // Disable -webkit-app-region: drag on the parent element
      document.getElementById("content").style["-webkit-app-region"] = "no-drag";  
    }

    console.log(didMod);
  };
</script>